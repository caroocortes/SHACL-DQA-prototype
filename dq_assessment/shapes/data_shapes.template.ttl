{% macro interlinking_external_uris(dataset_uri, interlinking_property) -%}
ex:UsageExternalURIEntitiesShape
    a sh:NodeShape ;
    sh:targetObjectsOf <{{ interlinking_property }}> ;
    sh:pattern "^(?!<{{ dataset_uri }}>)" ;
    sh:message "UsageExternalURIEntities - The dataset doesn't contain links to external sources" .
{%- endmacro %}

{% macro interlinking_open_same_as_chains_shape(interlinking_property) -%}
ex:OpenSameAsChainsShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{ interlinking_property }}> ;
    sh:property [
        sh:path [ sh:inversePath <{{ interlinking_property }}> ] ;
        sh:equals <{{ interlinking_property }}> ;
    ] ;
    sh:message "OpenSameAsChains - There are open <{{ interlinking_property }}> chains " .
{%- endmacro %}

{% macro performance_hash_uris_entities(type_property) -%}
ex:UsageHashURIsEntitiesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{ type_property }}> ;
    sh:message "UsageHashURIsEntities - It's is recommended the usage of slash URIs";
    sh:pattern "^[^#]*$" .
{%- endmacro %}

{% macro understandability_label_entities(type_property, labeling_property) -%}
ex:LabelForEntitiesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{ type_property }}> ;
    sh:property [
        sh:path <{{ labeling_property }}> ;
        sh:minCount 1 ;
        sh:message "LabelForEntities - All entities should be tagged with a label."
    ] .
{%- endmacro %}

{% macro understandability_uri_regex_compliance_entities(type_property, uri_regex_pattern) -%}
ex:URIRegexComplianceEntitiesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{ type_property }}> ;
    sh:pattern "{{ uri_regex_pattern }}" ; 
    sh:message "URIRegexComplianceEntities - URIs should match the regex pattern provided in void:uriRegexPattern".
{%- endmacro %}

{% macro interlinking_completeness(type_property, interlinking_property) -%}
ex:InterlinkingCompletenessShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{type_property}}> ;
    sh:property [
        sh:path <{{interlinking_property}}> ;
        sh:minCount 1;
        sh:message "InterlinkingCompleteness - Entities should be interlinked." ;
    ].
{%- endmacro %}

{% macro completeness_schema_completeness_class_usage(class_name, class_uri, type_property) -%}
ex:SchemaCompletenessClassUsageShape_{{class_name}}
    a sh:NodeShape ;
    sh:targetNode <{{class_uri}}> ;
    sh:property [
        sh:path [ sh:inversePath <{{type_property}}> ];
        sh:minCount 1;
        sh:message "SchemaCompletenessClassUsage_{{class_name}} - The class {{class_name}} is defined in the vocabulary but isn't used in the dataset";
    ].
{%- endmacro %}

{% macro completeness_property_completeness(property_uri, count_value) -%}
ex:PropertyCompletenessGeneralShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{property_uri}}> ;
    sh:property [
        sh:path <{{property_uri}}>;
        sh:minCount {{count_value}};
    ].
{%- endmacro %}

{% macro representational_conciseness_uris_length(type_property, max_length_value) -%}
ex:URIsLengthEntitiesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{ type_property }}> ;
    sh:maxLength {{ max_length_value }} ;
    sh:message "URIsLengthEntities - URIs should have a length of less than {{ max_length_value }}".
{%- endmacro %}

{% macro representational_conciseness_uris_parameters(type_property) -%}
ex:URIsParametersEntitiesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{ type_property }}> ;
    sh:message "URIsParametersEntities - URIs shouldn't use parameters";
    sh:not[
        sh:pattern "\\?.+=.*" ;
    ] .
{%- endmacro %}

{% macro representational_conciseness_prolix_features(type_property) -%}
ex:ProlixRDFFeaturesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{ type_property }}> ;
    sh:not[
        sh:or(
            [ sh:class rdf:Statement; ]
            [ sh:class rdf:List; ]
            [ sh:class rdf:Seq; ]
            [ sh:class rdf:Bag; ]
            [ sh:class rdf:Alt; ]
        );
        sh:message "ProlixRDFFeatures - Prolix features shouldn't be used (Lists, Containers)";
    ].
{%- endmacro %}

{% macro versatility_languages_labels_entities(type_property, labeling_property) -%}
ex:DifferentLanguagesLabelsEntitiesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{type_property}}> ;
    sh:property [
        sh:path <{{labeling_property}}> ;
        sh:datatype rdf:langString;
        sh:message "DifferentLanguagesLabelsEntities - Entities should provide labels with language tags";
    ].
{%- endmacro %}

{% macro versatility_languages_descriptions_entities(type_property, description_property) -%}
ex:DifferentLanguagesDescriptionsEntitiesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{type_property}}> ;
    sh:property [
        sh:path <{{description_property}}> ;
        sh:datatype rdf:langString;
        sh:message "DifferentLanguagesDescriptionsEntities - Entities should provide descriptions with language tags";
    ].
{%- endmacro %}

{% macro versatility_languages_labels_entities_list_languages(type_property, labeling_property, list_required_languages) -%}
ex:DifferentLanguagesEntitiesListLanguagesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{type_property}}> ;
    sh:property [
        sh:path <{{labeling_property}}> ;
        sh:datatype rdf:langString;
        sh:languageIn ( {{list_required_languages}} ) ;
        sh:uniqueLang true;
        sh:message "DifferentLanguagesEntitiesListLanguagesShape - Entities should provide labels with different languages";
    ].
{%- endmacro %}

{% macro versatility_self_descriptive_formats(type_property) -%}
ex:SelfDescriptiveFormatShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{type_property}}> ;
    sh:nodeKind sh:IRI ;
    sh:message "SelfDescriptiveFormat - Entities should be identified by URIs".
{%- endmacro %}

{% macro versatility_usage_blank_nodes(type_property) -%}
ex:BlankNodesUsageEntitiesShape
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{type_property}}> ;
    sh:not [ sh:nodeKind sh:BlankNode];
    sh:message "BlankNodesUsageEntities - The dataset should not use blank nodes to identify entities".
{%- endmacro %}

{% macro versatility_usage_blank_nodes_subjects(property_uri, shape_index) -%}
ex:BlankNodesUsageSubjectShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{property_uri}}> ;
    sh:not [ sh:nodeKind sh:BlankNode];
    sh:message "BlankNodesUsageSubject_{{shape_index}}_subject - The dataset should not use blank nodes".
{%- endmacro %}

{% macro versatility_usage_blank_nodes_objects(property_uri, shape_index) -%}
ex:BlankNodesUsageObjectShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetObjectsOf <{{property_uri}}> ;
    sh:not [ sh:nodeKind sh:BlankNode];
    sh:message "BlankNodesUsageObject_{{shape_index}}_object - The dataset should not use blank nodes".
{%- endmacro %}

{% macro consistency_entities_disjoint_classes(shape_id, first_class_uri, second_class_uri) -%}
ex:EntitiesDisjointClassesShape_{{shape_id}}
    a sh:NodeShape ;
    sh:targetClass <{{first_class_uri}}> ;
    sh:message "EntitiesDisjointClasses_{{shape_id}} - There are instances of the class {{first_class_uri}} that are instances of the disjoint class {{second_class_uri}}";
    sh:not [ sh:class <{{second_class_uri}}>].
{%- endmacro %}

{% macro consistency_misuse_properties(shape_index, property_uri, type_property) -%}
ex:MisusePropertiesShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetNode <{{property_uri}}> ;
    sh:property [
        sh:path [ sh:inversePath <{{type_property}}> ];
        sh:maxCount 0;
        sh:message "MisuseProperties_{{shape_index}} - The property {{property_uri}} is being used as a class";
    ].
{%- endmacro %}

{% macro consistency_misuse_object_properties(shape_index, property_uri) -%}
ex:MisuseOwlObjectPropertiesShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetObjectsOf <{{property_uri}}> ;
    sh:nodeKind sh:IRI;
    sh:message "MisuseOwlObjectProperties_{{shape_index}} - The object property {{property_uri}} is being used with Literals".
{%- endmacro %}

{% macro consistency_misuse_datatype_properties(shape_index, property_uri) -%}
ex:MisuseOwlDatatypePropertiesShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetObjectsOf <{{property_uri}}> ;
    sh:nodeKind sh:Literal;
    sh:message "MisuseOwlDatatypeProperties_{{shape_index}} - The datatype property {{property_uri}} is being used with Resources".
{%- endmacro %}

{% macro consistency_deprecated_classes(classes_list, type_property) -%}
ex:DeprecatedClassesUsageShape
    a sh:NodeShape ;
    sh:targetObjectsOf <{{type_property}}> ;
    sh:not [ 
        sh:in ( {{classes_list}} );
        sh:message "DeprecatedClassesUsage - Deprecated classes are being used in the dataset";
    ].
{%- endmacro %}

{% macro consistency_inverse_functional_property(shape_index, property_uri) -%}
ex:InverseFunctionalPropertyShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetObjectsOf <{{property_uri}}> ;
    sh:property [
        sh:path [ sh:inversePath <{{property_uri}}> ] ;
        sh:maxCount 1 ;
        sh:message "InverseFunctionalProperty_{{shape_index}} - The uniqueness characteristic of the inverse functional property is not enforced" ;
    ].
{%- endmacro %}

{% macro consistency_functional_property(shape_index, property_uri) -%}
ex:FunctionalPropertyShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{property_uri}}> ;
    sh:property [
        sh:path <{{property_uri}}> ;
        sh:maxCount 1 ;
        sh:message "FunctionalProperty_{{shape_index}} - The property {{property_uri}} is used with more than one value for the same node" ;
    ].
{%- endmacro %}

{% macro consistency_correct_domain(shape_index, property_uri, domain_class) -%}
ex:CorrectDomainShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{property_uri}}> ;
    sh:message "CorrectDomain_{{shape_index}} - The property {{property_uri}} is used with an incorrect domain" ;
    sh:class <{{domain_class}}> .
{%- endmacro %}

{% macro consistency_correct_range_datatype(shape_index, property_uri, datatype_uri) -%}
ex:CorrectRangeDatatypeShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetObjectsOf <{{property_uri}}> ;
    sh:message "CorrectRangeDatatype_{{shape_index}} - The property {{property_uri}} is used with an incorrect range" ;
    sh:datatype <{{datatype_uri}}> .
{%- endmacro %}

{% macro consistency_correct_range_object(shape_index, property_uri, class_uri) -%}
ex:CorrectRangeObjectShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetObjectsOf <{{property_uri}}> ;
    sh:message "CorrectRangeObject_{{shape_index}} - The property {{property_uri}} is used with an incorrect range" ;
    sh:class <{{class_uri}}> .
{%- endmacro %}

{% macro consistency_irreflexive_property(shape_index, property_uri) -%}
ex:IrreflexivePropertyShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{property_uri}}> ;
    sh:message "IrreflexiveProperty_{{shape_index}} - The irreflexive constraint for the property {{property_uri}} is not enforced " ;
    sh:disjoint <{{property_uri}}> .
{%- endmacro %}

{% macro syntactic_validity_malformed_datatype(shape_index, property_uri, datatype_pattern) -%}
ex:MalformedDatatypeShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{property_uri}}> ;
    sh:property [
        sh:path <{{property_uri}}> ;
        sh:pattern "{{datatype_pattern}}";
        sh:message "MalformedDatatype_{{shape_index}} - The property {{property_uri}} is used with a malformed datatype" ;
    ].
{%- endmacro %}

{% macro syntactic_validity_incompatible_datatype(shape_index, property_uri, datatype_uri) -%}
ex:MemberIncompatibleDatatypeShape_{{shape_index}}
    a sh:NodeShape ;
    sh:targetSubjectsOf <{{property_uri}}> ;
    sh:property [
        sh:path <{{property_uri}}> ;
        sh:datatype <{{datatype_uri}}>;
        sh:message "MemberIncompatibleDatatype_{{shape_index}} - The property {{property_uri}} is used with an incompatible datatype" ;
    ].
{%- endmacro %}